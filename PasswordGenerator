#imports
import random
import string
import sys
import math

#Assign Arrays
arrLower = string.ascii_lowercase
arrUpper = string.ascii_uppercase
arrNumber = string.digits
arrSpecial = string.punctuation

#Get user input
def UserInput():

    #get user input
    pwLen = input("Password length, 1 to 99?")
    useLower = input("Use Lower?")
    useUpper = input("Use Upper?")
    useNumber = input("use Numbers?")
    useSpecial = input("Use Specials?")


    return useLower, useUpper, useNumber, useSpecial, pwLen

#Check user inputs and validity
def checks(useLower, useUpper, useNumber, useSpecial, pwLen):

    #try user input as int
    try:
        int(pwLen)
    except:
        print("invalid input length")
        sys.exit()

    #checks for valid inputs and quits if not
    if(useLower == "y" or useLower == "n" ):
        print("lower ok")
    else:
        print("invalid")
        sys.exit()
    if(useUpper == "y" or useUpper == "n" ):
        print("upper ok")
    else:
        print("invalid")
        sys.exit()
    if(useNumber == "y" or useNumber == "n" ):
        print("number ok")
    else:
        print("invalid")
        sys.exit()
    if(useSpecial == "y" or useSpecial == "n" ):
        print("special ok")
    else:
        print("invalid")
        sys.exit()
    
    #checks if all answers are set to n
    answers = useLower+useUpper+useNumber+useSpecial

    #If all are set to n, quit the program
    if(answers == "nnnn"):
        print("No password generated due to your answers")
        sys.exit()

#function to generate Password
def generatePassword(useLower, useUpper, useNumber, useSpecial, pwLen):
    
    #Assign vars
    pwLen = int(pwLen)
    pwDiv = 0 
    useCount = 0
    pwInProgress = "b"

    #checks user inputs and counts if yes
    if (useLower == "y"):
        useCount += 1
    else:
        useLower=0

    if (useUpper == "y"):
        useCount += 1
    else:
        useUpper = 0

    if (useNumber == "y"):
        useCount += 1
    else:
        useNumber = 0

    if (useSpecial == "y"):
        useCount += 1
    else:
        useSpecial = 0

    #divide password length with count
    pwDiv = math.trunc(pwLen/(useCount))
    print(pwDiv)

    #run random in array for length of pwDiv
    i = 0
    while i < pwDiv:
        if (useLower == "y"):
            pwInProgress += arrLower[random.randint(0, len(arrLower)-1)]
        i+=1
    i = 0
    while i < pwDiv:
        if (useUpper == "y"):
            pwInProgress += arrUpper[random.randint(0, len(arrUpper)-1)]
        i+=1
    i = 0
    while i < pwDiv:
        if (useNumber == "y"):
            pwInProgress += arrNumber[random.randint(0, len(arrNumber)-1)]
        i+=1
    i = 0
    while i < pwDiv:
        if (useSpecial == "y"):
            pwInProgress += arrSpecial[random.randint(0, len(arrSpecial)-1)]
        i+=1


    #print(pwInProgress)

    #shuffles password
    l = list(pwInProgress)
    random.shuffle(l)
    result = ''.join(l)

    newlen = 0
    
    #checks if password is correct length
    if(len(result)<pwLen):
        
        newlen = pwLen-len(result)
        
        for x in range(newlen):
            pwInProgress += arrSpecial[random.randint(0, len(arrSpecial)-1)]

    #reshuffle the password
    l = list(pwInProgress)
    random.shuffle(l)
    result = ''.join(l)
    print(result)

useLower, useUpper, useNumber, useSpecial, pwLen = UserInput()
checks(useLower, useUpper, useNumber, useSpecial, pwLen)
generatePassword(useLower, useUpper, useNumber, useSpecial, pwLen)
